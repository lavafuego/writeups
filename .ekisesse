# ğŸ§  XSS lÃ³gico â†’ Credenciales hardcodeadas (AnÃ¡lisis de cÃ³digo)

## ğŸ“Œ Contexto

Durante el anÃ¡lisis de una aplicaciÃ³n web (entorno local `172.17.0.2:5000`) se planteaba la existencia de un **XSS en el dashboard** como pista principal del reto.

Tras mÃºltiples pruebas, el XSS **no se ejecutaba**, lo que indicaba que el objetivo real no era un XSS clÃ¡sico, sino algo distinto relacionado con la lÃ³gica del frontend.

---

## ğŸ” Pruebas iniciales de XSS

Payloads probados en campos como la biografÃ­a y enlaces sociales:

```html
<script>alert(1)</script>
<img src=x onerror=alert(1)>
<svg onload=alert(1)>
${alert(1)}
```

ğŸ“Œ Resultado:
- NingÃºn payload se ejecuta
- El input se refleja pero no evalÃºa JavaScript

ConclusiÃ³n inicial:
- El XSS estÃ¡ filtrado **o**
- El XSS es solo una **pista narrativa**

---

## ğŸ§­ Cambio de enfoque: anÃ¡lisis del frontend

Ante la falta de ejecuciÃ³n real, se decidiÃ³ analizar el cÃ³digo JavaScript accesible pÃºblicamente.

### EnumeraciÃ³n de rutas
Se utilizÃ³ `feroxbuster` para descubrir rutas y archivos estÃ¡ticos:

- `/static/js/dashboard.js`
- `/static/js/writeups.js`
- `/static/js/presentacionmaquina.js`
- `/static/js/ranking.js` â¬…ï¸ archivo clave

---

## ğŸ” Â¿Por quÃ© mirar `ranking.js`?

Porque:
- Es un JS pÃºblico
- Contiene lÃ³gica relacionada con rankings, recompensas y eventos
- En CTFs, este tipo de archivos suele ocultar lÃ³gica sensible

AdemÃ¡s, al buscar referencias a XSS en el cÃ³digo frontend, se detectÃ³ cÃ³digo relacionado con **detecciÃ³n de payloads XSS**.

---

## ğŸ”‘ Hallazgo crÃ­tico en `ranking.js`

Dentro del archivo aparece la funciÃ³n:

```js
function detectXSSPayload(url) {
    const xssPatterns = [
        'javascript:',
        'data:text/html',
        '<script',
        'onerror=',
        'alert('
    ];
    return xssPatterns.some(pattern => url.includes(pattern));
}
```

Esto confirma que:
- El frontend **detecta** XSS
- No lo ejecuta
- Solo comprueba si el usuario *intentÃ³* usarlo

Justo despuÃ©s, aparece la funciÃ³n de recompensa:

```js
function showXSSCongratulationsModal() {
    ...
    chocolate:chocolatito123
}
```

---

## â— Punto clave del reto

- La clave **NO aparece tras explotar un XSS**
- La clave **NO se genera dinÃ¡micamente**
- La clave **SIEMPRE ha estado en `ranking.js`**
- El XSS solo sirve para justificar la apariciÃ³n de una â€œventanitaâ€ (modal)

ğŸ‘‰ El exploit real es **leer el cÃ³digo fuente**.

---

## ğŸ§  ConclusiÃ³n final

Este reto no consiste en ejecutar JavaScript malicioso, sino en:

1. Detectar que el XSS no funciona
2. Analizar el frontend
3. Leer archivos JS pÃºblicos
4. Encontrar secretos hardcodeados

> **El XSS no era el exploit.  
> Era la excusa.**

---

## ğŸ Impacto de seguridad

- Credenciales SSH expuestas en JavaScript pÃºblico
- Accesibles por cualquier usuario
- Vulnerabilidad crÃ­tica si se replica en un entorno real

---

## ğŸ” Credenciales obtenidas

```text
usuario: chocolate
password: chocolatito123
```

---

## ğŸ“š LecciÃ³n aprendida

> En seguridad ofensiva, muchas veces no hay que ejecutar nada.
>  
> **Solo leer.**

---

## ğŸ‘¤ Autor

Writeup realizado por **[tu nick aquÃ­]**
